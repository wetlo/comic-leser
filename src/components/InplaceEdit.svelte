<script lang="ts">
    import type { HTMLInputTypeAttribute } from 'svelte/elements';

    export let type: HTMLInputTypeAttribute;
    export let value: string;
    export let pattern: string | undefined = undefined;
    let width = "2ch";
    $: width = value.length + "ch";
</script>

<input
style="width: {width}"
{type} {value} {pattern}

on:input={e => {
    value = e.currentTarget.value || value;
    value = value
    console.log(`[${value}]`)
}} />


<style>
    input {
        padding: 0;
        /* width: 100%; */
        min-width: 1ch;

        background-color: transparent;
        color: inherit;
        border: none;
        resize: none;
    }

    input:focus {
        border: none;
        border-bottom: solid 1px;
        color: inherit;
        outline: none;
    }

    /* TODO: does this even work on all platforms?? */
    input[type=number]::-webkit-inner-spin-button,
    input[type=number]::-webkit-outer-spin-button { 
        -webkit-appearance: none; 
        margin: 0; 
    }
</style>